<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sorpresa Interactiva</title>
<style>
  body {
    margin: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #000;
    overflow: hidden;
    font-family: Arial, sans-serif;
    color: white;
    flex-direction: column;
    position: relative;
  }

  /* Pantalla de carga */
  #loadingScreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: black;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .loading-heart { width: 80px; height: 80px; fill: #ff2d75; animation: pulse 1s infinite; }
  .loading-text { margin-top: 15px; font-size: 18px; color: #ff2d75; text-align: center; }
  .loading-bar-container { margin-top: 15px; width: 70%; height: 12px; background: #222; border-radius: 10px; overflow: hidden; }
  .loading-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #ff2d75, #ff80b5); box-shadow: 0 0 15px #ff2d75; transition: width 2s linear; }

  @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
  .shake { animation: shake 0.4s; }
  @keyframes shake { 0%{transform:translate(0,0);}20%{transform:translate(-5px,0);}40%{transform:translate(5px,0);}60%{transform:translate(-5px,0);}80%{transform:translate(5px,0);}100%{transform:translate(0,0);} }

  #mainHeart { width: 120px; height: 120px; fill: #ff2d75; cursor: pointer; filter: drop-shadow(0 0 15px #ff80b5) drop-shadow(0 0 30px #ff2d75); transition: transform 0.2s ease; z-index:2; }
  .pulse { animation: pulse 0.4s ease; }

  .progress-container { width: 70%; height: 18px; background: #222; border-radius: 15px; margin-top: 15px; overflow: hidden; box-shadow: 0 0 15px #ff2d75; z-index:2; }
  .progress-bar { width:0%; height:100%; background: linear-gradient(90deg, #ff2d75, #ff80b5); transition: width 0.3s; box-shadow: 0 0 20px #ff2d75; }

  #paper { display:none; position:absolute; background:#f5deb3; color:#000; padding:25px; border-radius:15px; box-shadow:0 0 20px #fff,0 0 40px #ff2d75; text-align:center; max-width:90%; font-size:18px; animation:showPaper 1s ease forwards; z-index:3; }

  /* BotÃ³n de pausa/reproducciÃ³n fijo */
  #pauseBtn {
    position: fixed;
    top: 10px;
    right: 10px;
    background: #ff2d75;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    cursor: pointer;
    z-index:10;
    display: none; /* se mostrarÃ¡ despuÃ©s del flash */
    filter: drop-shadow(0 0 10px #ff80b5) drop-shadow(0 0 20px #ff2d75);
    transition: transform 0.2s ease, filter 0.2s ease;
  }
  #pauseBtn:hover {
    transform: scale(1.1);
    filter: drop-shadow(0 0 15px #ff80b5) drop-shadow(0 0 30px #ff2d75);
  }

  #pauseIcon { width: 24px; height: 24px; fill: white; }

  @keyframes showPaper { from{opacity:0;transform:scale(0.5);} to{opacity:1;transform:scale(1);} }

  #flash { display:none; position:absolute; top:0; left:0; width:100%; height:100%; background:white; z-index:5; animation: flash 3s ease; }
  @keyframes flash { 0%{opacity:0;}20%{opacity:1;}80%{opacity:1;}100%{opacity:0;} }

  .background-heart { position:absolute; width:25px; height:25px; fill:#ff2d75; opacity:0.4; animation: pulse 2s infinite, float 6s ease-in-out infinite; z-index:0; }

  @keyframes float {
    0% { transform: translate(0,0); }
    25% { transform: translate(10px,-5px); }
    50% { transform: translate(-10px,5px); }
    75% { transform: translate(5px,-5px); }
    100% { transform: translate(0,0); }
  }

  @media(max-width:500px){
    #mainHeart{width:90px;height:90px;}
    .progress-container{width:90%;height:15px;}
    #paper{padding:15px;font-size:16px;}
    .loading-heart{width:60px;height:60px;}
    .loading-text{font-size:16px;}
    .loading-bar-container{width:90%;height:10px;}
    #pauseBtn{
      top:10px;
      right:auto;
      left:50%;
      transform:translateX(-50%);
      width:60px;
      height:60px;
    }
    #pauseIcon{width:28px;height:28px;}
  }
</style>
</head>
<body>

<div id="loadingScreen">
  <svg class="loading-heart" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
  <div class="loading-text">Cargando...</div>
  <div class="loading-bar-container"><div class="loading-bar"></div></div>
</div>

<svg id="mainHeart" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>

<div class="progress-container" id="progress-container"><div class="progress-bar" id="progress"></div></div>
<div id="flash"></div>

<div id="paper">
  <h2>ðŸ’Œ Â¡Sorpresa!</h2>
  <p>Este es tu mensaje especial âœ¨</p>
</div>

<button id="pauseBtn">
  <svg id="pauseIcon" viewBox="0 0 24 24">
    <rect x="6" y="4" width="4" height="16"/>
    <rect x="14" y="4" width="4" height="16"/>
  </svg>
</button>

<audio id="pop-sound" src="tap.mp3"></audio>
<audio id="bg-music" loop>
  <source src="Defondo.mp3" type="audio/mpeg">
</audio>
<audio id="explosion" src="Explosion.mp3"></audio>

<script>
const heart = document.getElementById("mainHeart");
const progress = document.getElementById("progress");
const progressContainer = document.getElementById("progress-container");
const paper = document.getElementById("paper");
const flash = document.getElementById("flash");
const popSound = document.getElementById("pop-sound");
const bgMusic = document.getElementById("bg-music");
const explosion = document.getElementById("explosion");
const pauseBtn = document.getElementById("pauseBtn");
const pauseIcon = document.getElementById("pauseIcon");
let clicks = 0;

window.onload = () => {
  document.querySelector(".loading-bar").style.width = "100%";
  setTimeout(()=>{ document.getElementById("loadingScreen").style.display="none"; },2000);
  createBackgroundHearts();
};

function createBackgroundHearts(){
  for(let i=0;i<25;i++){
    const h=document.createElementNS("http://www.w3.org/2000/svg","svg");
    h.setAttribute("class","background-heart");
    h.setAttribute("viewBox","0 0 24 24");
    h.style.left=Math.random()*window.innerWidth+"px";
    h.style.top=Math.random()*window.innerHeight+"px";
    h.style.width=15+Math.random()*20+"px";
    h.style.height=h.style.width;
    h.style.animationDuration=(1.5+Math.random()*2)+"s, "+(5+Math.random()*5)+"s";
    const path=document.createElementNS("http://www.w3.org/2000/svg","path");
    path.setAttribute("d","M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z");
    h.appendChild(path);
    document.body.appendChild(h);
  }
}

heart.addEventListener("click",()=>{
  clicks++;
  heart.classList.add("pulse");
  document.body.classList.add("shake");
  popSound.currentTime=0;
  popSound.play();
  setTimeout(()=>{ heart.classList.remove("pulse"); document.body.classList.remove("shake"); },400);
  const percent=Math.min((clicks/10)*100,100);
  progress.style.width=percent+"%";
  if(percent===100) triggerFlash();
});

function triggerFlash(){
  explosion.currentTime=0;
  explosion.play();
  flash.style.display="block";
  heart.style.display="none";
  progressContainer.style.display="none";
  paper.style.display="block";
  setTimeout(()=>{
    flash.style.display="none";
    bgMusic.currentTime=0;
    bgMusic.play();
    pauseBtn.style.display="block"; // mostrar el botÃ³n despuÃ©s del flash
  },3000);
}

// BotÃ³n de pausa/reproducciÃ³n con SVG dinÃ¡mico
let musicPaused = false;
pauseBtn.addEventListener("click",()=>{
  if(musicPaused){
    bgMusic.play();
    pauseIcon.innerHTML = '<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>'; // pause
    musicPaused=false;
  }else{
    bgMusic.pause();
    pauseIcon.innerHTML = '<polygon points="6,4 20,12 6,20"/>'; // play
    musicPaused=true;
  }
});
</script>
</body>
</html>
